<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.104.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="sysext (System Extension) # sysexts (System Extensions) are DDIs ( Discoverable Disk Images) that are built to extend a base system via an overlay. A root (or /usr/) DDI can be extended by several sysext DDIs via, usually, a read-only OverlayFS.
Image Format # sysexts are DDIs ( Discoverable Disk Images), so the file format will not be redefined here.
Content # sysext images extend /usr/ (OS vendor tree) and/or /opt/ (third-party vendor tree)."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Sysext - System Extension"><meta property="og:description" content="sysext (System Extension) # sysexts (System Extensions) are DDIs ( Discoverable Disk Images) that are built to extend a base system via an overlay. A root (or /usr/) DDI can be extended by several sysext DDIs via, usually, a read-only OverlayFS.
Image Format # sysexts are DDIs ( Discoverable Disk Images), so the file format will not be redefined here.
Content # sysext images extend /usr/ (OS vendor tree) and/or /opt/ (third-party vendor tree)."><meta property="og:type" content="article"><meta property="og:url" content="https://uapi-group.org/specifications/specs/sysext/"><meta property="article:section" content="specs"><title>Sysext - System Extension | UAPI Group Specifications</title><link rel=manifest href=/specifications/manifest.json><link rel=icon href=/specifications/favicon.png type=image/x-icon><link rel=stylesheet href=/specifications/book.min.f716a89e40b01f033146ee402497165ac5bcf8935948094dceafbcb19f6f3c8d.css integrity="sha256-9xaonkCwHwMxRu5AJJcWWsW8+JNZSAlNzq+8sZ9vPI0="><script defer src=/specifications/en.search.min.985cf8e7c3eca74eed03e1a4c05027f11d553d0b0d5bc627778e74863450e80a.js integrity="sha256-mFz458Psp07tA+GkwFAn8R1VPQsNW8Ynd450hjRQ6Ao="></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/specifications><span>UAPI Group Specifications</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://uapi-group.org/>⬅️ Back to top</a></li><li>⸻</li></ul><ul><li><span>Specs</span><ul><li><a href=https://uapi-group.org/specifications/specs/base_directory_specification/>Base Directory Specification</a></li><li><a href=https://uapi-group.org/specifications/specs/boot_loader_specification/>Boot Loader Specification</a></li><li><a href=https://uapi-group.org/specifications/specs/discoverable_disk_image/>Discoverable Disk Image</a></li><li><a href=https://uapi-group.org/specifications/specs/discoverable_partitions_specification/>Discoverable Partitions Specification</a></li><li><a href=https://uapi-group.org/specifications/specs/linux_tpm_pcr_registry/>Linux TPM PCR Registry</a></li><li><a href=https://uapi-group.org/specifications/specs/sysext/ class=active>Sysext - System Extension</a></li><li><a href=https://uapi-group.org/specifications/specs/unified_kernel_image/>Unified Kernel Image</a></li></ul></li></ul><ul><li>⸻</li><li><a href=https://github.com/uapi-group/specifications target=_blank rel=noopener>Collaborate on Github</a></li></ul></nav><script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/specifications/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Sysext - System Extension</strong>
<label for=toc-control><img src=/specifications/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#image-format>Image Format</a></li><li><a href=#content>Content</a><ul><li><a href=#identification>Identification</a></li><li><a href=#fields-in-extension->Fields in extension-</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=sysext-system-extension>sysext (System Extension)
<a class=anchor href=#sysext-system-extension>#</a></h1><p>sysexts (System Extensions) are DDIs (
<a href=/specifications/specs/discoverable_disk_image/>Discoverable Disk Images</a>) that are
built to extend a base system via an overlay. A root (or <code>/usr/</code>) DDI can be extended by several sysext
DDIs via, usually, a read-only OverlayFS.</p><h2 id=image-format>Image Format
<a class=anchor href=#image-format>#</a></h2><p>sysexts are DDIs (
<a href=/specifications/specs/discoverable_disk_image/>Discoverable Disk Images</a>), so the file format will not be
redefined here.</p><h2 id=content>Content
<a class=anchor href=#content>#</a></h2><p>sysext images extend <code>/usr/</code> (OS vendor tree) and/or <code>/opt/</code> (third-party vendor tree). They should be
additive, and not override content present in the base image or other sysext images, but this will not be
enforced.</p><h3 id=identification>Identification
<a class=anchor href=#identification>#</a></h3><p>A sysext must contain a <code>/usr/lib/extension-release.d/extension-release.&lt;IMAGE></code> file, where <code>&lt;IMAGE></code>
must either match the name of the sysext minus the suffix, or alternatively <code>extension-release.&lt;IMAGE></code>
must be tagged with a <code>user.extension-release.strict</code> xattr set to the string <code>"0"</code> in order to be valid.
This is to make it obvious to users that a sysext is used for its purpose.
The format of <code>extension-release.&lt;IMAGE></code> is the same as the
<a href=https://www.freedesktop.org/software/systemd/man/os-release.html><code>os-release</code> file</a>, and it is a
newline-separated list of environment-like shell-compatible variable assignments. A new field
<code>SYSEXT_LEVEL=</code> has been introduced to allow an implementation to match a sysext with the base image upon
which it is layered: if <code>SYSEXT_LEVEL=</code> is present, it must match between the layers or the systext must
be ignored, while if it is not present, but <code>VERSION_ID=</code> is, then the latter must match instead.
In addition, the <code>ID=</code> field must be present and match the base image&rsquo;s, or be set to the special value
<code>_any</code>, in case the sysext can be used on any Linux distribution.</p><h3 id=fields-in-extension->Fields in extension-
<a class=anchor href=#fields-in-extension->#</a></h3><h4 id=sysext_level><code>SYSEXT_LEVEL=</code>
<a class=anchor href=#sysext_level>#</a></h4><p>A lower-case string (mostly numeric, no spaces or other characters outside of 0–9, a–z, &ldquo;.&rdquo;, &ldquo;_&rdquo; and
&ldquo;-&rdquo;) identifying the operating system extensions support level, to indicate which extension images are
supported.</p><p>Examples: <code>"SYSEXT_LEVEL=2"</code>, <code>"SYSEXT_LEVEL=15.14"</code>.</p><p>If not present, and if <code>VERSION_ID=</code> is present instead, then this will be checked instead.</p><h4 id=sysext_scope><code>SYSEXT_SCOPE=</code>
<a class=anchor href=#sysext_scope>#</a></h4><p>Takes a space-separated list of one or more of the strings <code>"system"</code>, <code>"initrd"</code> and <code>"portable"</code>. This field
is optional and indicates what environments the system extension is applicable to: i.e. to regular systems,
to initrds, or to
<a href=https://systemd.io/PORTABLE_SERVICES/>portable service images</a>. If unspecified,
<code>"SYSEXT_SCOPE=system portable"</code> is implied, i.e. any system extension without this field is applicable to
regular systems and to portable service environments, but not to initrd environments.</p><h4 id=architecture><code>ARCHITECTURE=</code>
<a class=anchor href=#architecture>#</a></h4><p>A string that specifies which CPU architecture the userspace binaries require. This field is optional
and should only be used when just single architecture is supported. It may provide redundant
information when used in a GPT partition with a GUID type that already encodes the architecture. If this
is not the case, the architecture should be specified in e.g., an extension image, to prevent an
incompatible host from loading it.</p><p>Valid values:</p><table><thead><tr><th>Architecture</th></tr></thead><tbody><tr><td>x86</td></tr><tr><td>x86-64</td></tr><tr><td>ppc</td></tr><tr><td>ppc-le</td></tr><tr><td>ppc64</td></tr><tr><td>ppc64-le</td></tr><tr><td>ia64</td></tr><tr><td>parisc</td></tr><tr><td>parisc64</td></tr><tr><td>s390</td></tr><tr><td>s390x</td></tr><tr><td>sparc</td></tr><tr><td>sparc64</td></tr><tr><td>mips</td></tr><tr><td>mips-le</td></tr><tr><td>mips64</td></tr><tr><td>mips64-le</td></tr><tr><td>alpha</td></tr><tr><td>arm</td></tr><tr><td>arm-be</td></tr><tr><td>arm64</td></tr><tr><td>arm64-be</td></tr><tr><td>sh</td></tr><tr><td>sh64</td></tr><tr><td>m68k</td></tr><tr><td>tilegx</td></tr><tr><td>cris</td></tr><tr><td>arc</td></tr><tr><td>arc-be</td></tr><tr><td>native</td></tr><tr><td>any</td></tr></tbody></table></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/uapi-group/specifications/edit/main/specs/specs/sysext.md target=_blank rel=noopener><img src=/specifications/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#image-format>Image Format</a></li><li><a href=#content>Content</a><ul><li><a href=#identification>Identification</a></li><li><a href=#fields-in-extension->Fields in extension-</a></li></ul></li></ul></nav></div></aside></main></body></html>